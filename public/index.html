<!DOCTYPE html>
<html>
<head>
    <title>Movie Search</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Make a playlist from the Top 250 Movies</h1>
    
    <label>Title: <input id="title" placeholder="e.g. Shawshank"></label><br>
    <!--I changed it to a dropdown cuz i thought itd be easier - Juno -->
    <label>Genre: 
        <select id="genre">
            <option value="">Any</option>
            <option value="Action">Action</option>
            <option value="Adventure">Adventure</option>
            <option value="Animation">Animation</option>
            <option value="Biography">Biography</option>
            <option value="Comedy">Comedy</option>
            <option value="Crime">Crime</option>
            <option value="Drama">Drama</option>
            <option value="Fantasy">Fantasy</option>
            <option value="Horror">Horror</option>
            <option value="Mystery">Mystery</option>
            <option value="Romance">Romance</option>
            <option value="Sci-Fi">Sci-Fi</option>
            <option value="Thriller">Thriller</option>
            <option value="War">War</option>
            <option value="Western">Western</option>
        </select>
    </label><br>
    <label>Min Rating: <input id="rating" type="number" step="0.1"></label><br>
    
    <button onclick="search()">Search</button>
    
    <h2>Results</h2>
    <div id="results" class="movie-grid"></div>
    
    <script>
        async function search() {
            const title = document.getElementById('title').value;
            const genre = document.getElementById('genre').value;
            const rating = document.getElementById('rating').value;
    
            const query = new URLSearchParams();
            if (title) query.append("title", title);
            if (genre) query.append("genre", genre);
            if (rating) query.append("minRating", rating);
    
            const res = await fetch("/api/search?" + query.toString());
            const data = await res.json();
    
            // display results
            displayMovies(data);
        }
    
        // display movies
        function displayMovies(movies) {
            const container = document.getElementById('results');
            container.innerHTML = ""; 
    
            movies.forEach(movie => {
                const div = document.createElement('div');
                div.className = "movie-card";
    
                div.innerHTML = `
                    <h3>${movie.primaryTitle}</h3>
                    <p>Genres: ${movie.genres.join(", ")}</p>
                    <p>Rating: ${movie.averageRating}</p>
                `;
                container.appendChild(div);
            });
        }
    </script>
    
</body>
</html>
