<!DOCTYPE html>
<html>
<head>
    <title>Movie Search</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Sancreek Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sancreek&display=swap" rel="stylesheet">

    <!-- Gloock Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gloock&display=swap" rel="stylesheet">
    
</head>
<body>
    <form>
        <h1>Create a Movie Playlist</h1>    
        <input type="text" id="title" placeholder="Movie Title">
        <input type="text" id="genre" placeholder="Genre">
        <input type="number" id="rating" placeholder="Minimum Rating" min="0" max="10" step="0.1">
        <button type="button" onclick="search()">Search</button>

        <div id="results" class="results"></div>        
    </form>

    <div>Current Playlist</div>
    <div id="playlist" class="playlist"></div>

    


    <script>
        async function search() {
            const title = document.getElementById('title').value;
            const genre = document.getElementById('genre').value;
            const rating = document.getElementById('rating').value;
    
            const query = new URLSearchParams();
            if (title) query.append("title", title);
            if (genre) query.append("genre", genre);
            if (rating) query.append("minRating", rating);
    
            const res = await fetch("/api/search?" + query.toString());
            const data = await res.json();
    
            // display results
            displayMovies(data);
        }
    
        // display movies
        function displayMovies(movies) {
            const container = document.getElementById('results');
            container.innerHTML = ""; 
    
            movies.forEach(movie => {
                const div = document.createElement('div');
                div.className = "movie-card";
    
                div.innerHTML = `
                    <h3>${movie.primaryTitle}</h3>
                    <p>Genres: ${movie.genres.join(", ")}</p>
                    <p>Rating: ${movie.averageRating}</p>
                    <button onClick="addToPlaylist(${movie})"> Add to Playlist </button>
                `;
                container.appendChild(div);
            });
        }

        function addToPlaylist(movieId) {
            // Function to add movie to playlist
        }
    </script>
    
</body>
</html>
